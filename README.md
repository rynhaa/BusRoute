# 버스 노선별 사용자수 예측 및 불편 신고접수 시스템

## 💡 프로젝트 개요
버스 노선, 정류장 정보를 API를 통해 실시간으로 제공하고, 사용자의 불편 및 신고 접수를 받을 수 있는 시스템입니다.
버스 실시간 도착 정보, 즐겨찾기, 불편 접수, 그리고 관리자 페이지를 통해 사용자 뿐만 아니라 관리자도 편리하게 사용할 수 있도록 구현하였습니다.



## 🛠 사용 기술 스택

| 구분 | 기술 |
|------|------|
| Backend | Spring Framework, Spring MVC, MyBatis |
| Frontend | JSP, HTML, CSS, JavaScript, jQuery |
| DBMS | MySQL |
| UI 라이브러리 | Bootstrap |
| 외부 API | Kakao 지도 API,  공공데이터포털 API |
| 서버환경 | Apache Tomcat 9.x |
| IDE | STS (Spring Tool Suite 3) |



## 📁 프로젝트 구조
```
📁BusRoute/
├── 📁src/
│   └── 📁main/
│       ├── 📁java/
│       │   └── 📁com/busroute/
│       │       ├── 📁controller/         # REST API Controller
│       │       ├── 📁domain/             # VO 클래스 (DTO 포함)
│       │       ├── 📁mapper/             # MyBatis 인터페이스
│       │       └── 📁service/            # 비즈니스 로직 처리
│       └── 📁resources/
│           ├── 📁mapper/                 # MyBatis XML SQL 매핑 파일
│           ├── 📑application.properties  # DB 연결 및 설정 파일
│           └── 📑log4j.xml               # 로깅 설정
├── 📁sql/                                # DB 테이블 및 초기 데이터
│   ├── 📑tb_user.sql                     # 사용자 정보
│   ├── 📑tb_bus.sql                      # 버스 정보(노선)
│   ├── 📑tb_station.sql                  # 버스 정류장 정보
│   ├── 📑tb_route_station.sql            # 버스 노선과 정류장 연결 테이블(매핑용)
│   ├── 📑tb_actual_boarding.sql          # 버스별 사용자 승하차 인원 정보(실제정보)
│   ├── 📑tb_weather.sql                  # 날씨 정보(예측 시 사용)
│   ├── 📑tb_report.sql                   # 불편 신고접수
│   ├── 📑tb_board.sql                    # 공지사항
│   ├── 📑tb_prediction.sql               # 버스별 승하차 인원 정보(예측정보)
│   ├── 📑tb_role_log.sql                 # 사용자 권한 변경 로그
│   ├── 📑tb_email_log.sql                # 이메일 전송 로그
│   ├── 📑tb_user_favorite_route.sql      # 버스 즐겨찾기
│   └── 📑tb_user_favorite_station.sql    # 버스 정류장 즐겨찾기
│  
├── 📑pom.xml                             # Maven 의존성 관리 파일
```


## ✨ 주요 기능
API를 호출해 실시간으로 버스 정보를 받고, 불편 및 신고 접수를 편리하기 하기 위한 기능들을 제공합니다.

### 🚌 실시간 버스 노선 및 정류장 정보 조회
- 외부 API를 통해 노선별 정류장 및 실시간 버스 위치 정보를 제공합니다.
- 정류장을 클릭하면 해당 정류장을 지나는 모든 버스의 위치가 지도에 표시됩니다.
- 특정 버스 클릭 시 하단에 이동 경로 및 현재 위치가 자동 스크롤되며 표시됩니다.

### 💡 노선별 사용자 예측 대시보드
- **관리자 전용 메뉴**로, 노선별 예상 승·하차 인원을 시간대별로 시각화합니다.
- 예측 모델은 XGBoost, Prophet 등을 기반으로 하며, 실시간 또는 지정일 기준으로 예측 가능하게 구성되어 있습니다.

### 📨 불편 신고 접수 및 관리
- 관리자 페이지에서 각 AS 기사에 대해 방문일자와 고객 정보를 등록할 수 있습니다.
- 스케줄 클릭 시 수정 및 삭제 기능도 지원됩니다.

### 📋 고객 요청 상태 관리
- 사용자는 버스 이용 중 발생한 **불편사항이나 민원**을 등록할 수 있습니다.
- 등록된 신고는 관리자 페이지에서 확인 가능하며, 상태는 다음과 같이 관리됩니다:
  `접수 → 처리중 → 완료`
- 관리자 페이지에서는 신고 통계 및 신고별 처리 이력을 확인할 수 있습니다.

### 📋 사용자 및 관리자 권한 관리
- 관리자는 사용자 목록을 조회하고, 권한을 일반 / 중지로 변경할 수 있습니다.
- 관리자 계정도 별도로 관리 가능하며, 모든 권한 변경 기록은 **로그로 남아 추적 가능**합니다.

### 🔄 상태별 필터 및 정렬
- 전체 스케줄에서 `처리중`, `완료`, `접수` 등 상태별로 필터링하여 볼 수 있습니다.
- 날짜 기준으로 정렬 기능도 제공합니다.

### 📈 버스 운영 데이터 관리 및 통계
- 버스 노선 및 정류장 데이터는 관리자에 의해 직접 관리할 수 있으며, 변경 시 실시간 반영됩니다.
- 사용자 예측 데이터 및 민원 접수 건에 대한 **통계 그래프**가 제공되어 의사결정에 도움을 줍니다.

### 📢 공지사항 등록 및 열람
- 관리자는 전체 사용자 대상의 공지사항을 등록 및 수정할 수 있으며, 사용자는 별도 로그인 없이도 공지사항을 열람할 수 있습니다.

### 🔒 로그인 및 마이페이지 기능
- 사용자는 로그인 후 자신의 **즐겨찾기 정류장, 신고 내역, 개인정보 등**을 마이페이지에서 확인할 수 있습니다.
- **비밀번호 변경 기능이 포함**되어 있어 보안을 강화할 수 있습니다.


## 📷 주요 화면 스크린샷

| 버스 실시간 도착 정보 | 버스 노선 정보 |
|---------------|----------------|
| <img width="400" alt="버스정류장_이미지" src="https://github.com/user-attachments/assets/b1296cca-b3b7-4a1c-8464-88cb42e0944a" /> | <img width="400" alt="버스노선이미지" src="https://github.com/user-attachments/assets/e0045893-066d-4bfc-a24a-a1bce978ea9c" /> |
| 버스정류장 및 실시간 도착정보 | 버스 노선 정보 |

| 불편 및 신고 접수 | 승하차 예측 정보 |
|---------------|----------------|
| <img width="400" alt="불편신고이미지" src="https://github.com/user-attachments/assets/78f7feda-b5ed-4294-aae7-456f933459c7" /> | <img width="400" alt="예측이미지" src="https://github.com/user-attachments/assets/dac1c789-f1a6-4041-8785-880ab3fcd113" />|
| 불편 및 신고 접수 | 승하차 예측 정보 |


## 🧩 시스템 플로우
```markdown
[0] 소셜 로그인 (카카오/네이버)  
     - 사용자는 소셜 계정으로 간편 로그인 가능  
     - 로그인 이후에만 즐겨찾기 및 불편 접수 사용 가능
        ↓

[1] 사용자 페이지 접속  
     - 실시간 버스 노선 및 정류장 정보 조회  
     - Kakao 지도와 연동해 위치 확인 가능  
     - 로그인 사용자만 원하는 노선·정류장은 '즐겨찾기'로 등록 가능
        ↓

[2] 사용자 불편 접수 등록(로그인 필요)
     - 별도 게시판 형식으로 불편사항 접수
     - 제목, 내용만 작성하면 등록 가능, 첨부파일 첨부 가능
        ↓

[3] DB 저장 (Spring → MyBatis → MySQL)  
     - 상태값 `접수`로 DB에 저장됨
        ↓

[4] 사용자에게 접수 확인 이메일 자동 발송  
     - 신고 내용, 접수일자 포함  
     - "새로운 게시글이 접수되었습니다" 안내
        ↓

[5] 관리자 페이지에서 접수 목록 확인
     - 접수 시 관리자 이메일로 접수 내용이 발송
     - 관리자 화면에서 신고 내역 확인 및 상태 변경, 답변 등록 가능
        ↓

[6] 상태 변경 시 사용자에게 이메일 자동 발송  
     - 변경된 상태(`처리중`, `완료`)에 대한 알림  
     - 관리자 답변 내용 포함
        ↓

[8] 최종 완료 처리 및 마무리 : 처리중 → 완료  
     - 사용자 마이페이지에서 처리 결과 및 답변 확인 가능

----------------------------------------------------

[9] 예측 데이터 스케줄링 (FastAPI)  
     - 매일 또는 주기적으로 예측 스크립트 실행  
     - 과거 날씨 + 모델 기반으로 미래 사용자 수 예측
        ↓

[10] 예측 결과 DB 저장  
     - 예측된 승·하차 수를 DB에 저장
        ↓

[11] 관리자 대시보드에서 예측 데이터 시각화  
     - 노선별, 시간대별 사용자 수 예측 결과 그래프 제공
```

## 🚀 실행 방법

1. **프로젝트 다운로드**
   - Git으로 클론:  
     ```bash
     git clone https://github.com/your-username/BusRoute.git
     ```
   - 또는 ZIP 다운로드 후 압축 해제

2. **STS / Eclipse에서 Import**
   - `File` → `Import` → `Maven` → `Existing Maven Projects`
   - `pom.xml` 있는 폴더 선택 → `Finish`

3. **DB 연결 설정**
   - `context-datasource.xml` 또는 `application.properties` 파일에서
     본인의 MySQL 접속 정보(`url`, `username`, `password`)로 수정


4. **Tomcat 서버로 실행**
   - `Run on Server` → `Tomcat v9.0` 등 선택
   - 실행 후 접속:  
     ```
     http://localhost:8080/
     ```

5. **기본 기능 페이지**
   - `/report` : 불편 신고 접수 및 처리 현황 확인
   - `/route` : 실시간 버스 노선 및 정류장 정보 조회, 즐겨찾기 기능
   - `/admin` : 관리자용 사용자 관리, 불편 접수 관리, 예측 데이터 대시보드

> ⚠️ 실행 오류 시 Java, DB 연결 설정, Maven 빌드 상태를 확인하세요.




## 📷 시연 영상

<div align="center">

<video src="https://github.com/user-attachments/assets/7e0fed8a-9ecc-4215-8ba0-21d3e0e8811c" controls width="800"></video>

</div>

